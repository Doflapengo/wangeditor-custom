<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>custom-test</title>
  <script src="../dist/wangEditor.js"></script>
  <!-- <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
</head>

<body>
  <div id="app"></div>
  <div id="app2"></div>
  <button type="button" id="btn">click</button>
</body>
<script>
  var E = window.wangEditor
  var editor = new E('#app')

  // editor.config.menuTooltipPosition = 'down'
  // editor.config.uploadImgServer = 'https://www.baidu.com'
  // 配置图库数据
  editor.config.depotImgServer = [
    'https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png',
    'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F19%2F03%2F15%2F75076c485081d15ed9c224ad3e4ce4a1.jpg&refer=http%3A%2F%2Fbpic.588ku.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1635212937&t=1028c766c613361c5a59e1db08bb2e94',
    'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F16%2F10%2F29%2F2ac8e99273bc079e40a8dc079ca11b1f.jpg&refer=http%3A%2F%2Fbpic.588ku.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1635212937&t=80d47f89a2bbb906d987122915b42f4f'
  ]
  editor.config.customUploadImg = function (resultFiles, insertImgFn) {
    let formData = new FormData()
    formData.append('pic', resultFiles[0])
    // $.ajax({
    //   url: 'http://localhost:3000/upload',
    //   type: 'POST',
    //   data: formData,
    //   contentType: false,
    //   processData: false,
    //   success(res) {
    //     console.log(res)
    //     // insertImgFn(imgUrl)
    //   }
    // })
    console.log(formData)
  }
  editor.config.onCatalogChange = function (headList) {
    // console.log(headList)
    window.oldCatalogs = headList
  }
  editor.create()

  // 第二个富文本编辑器
  var editor2 = new E('#app2')
  // editor2.config.menuTooltipPosition = 'down'
  // editor.config.uploadImgServer = 'https://www.baidu.com'
  // 配置图库数据
  editor2.config.depotImgServer = [
    'https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png',
    'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F19%2F03%2F15%2F75076c485081d15ed9c224ad3e4ce4a1.jpg&refer=http%3A%2F%2Fbpic.588ku.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1635212937&t=1028c766c613361c5a59e1db08bb2e94',
    'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F16%2F10%2F29%2F2ac8e99273bc079e40a8dc079ca11b1f.jpg&refer=http%3A%2F%2Fbpic.588ku.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1635212937&t=80d47f89a2bbb906d987122915b42f4f'
  ]
  editor2.config.customUploadImg = function (resultFiles, insertImgFn) {
    let formData = new FormData()
    formData.append('pic', resultFiles[0])
    // $.ajax({
    //   url: 'http://localhost:3000/upload',
    //   type: 'POST',
    //   data: formData,
    //   contentType: false,
    //   processData: false,
    //   success(res) {
    //     console.log(res)
    //     // insertImgFn(imgUrl)
    //   }
    // })
    console.log(formData)
  }
  editor2.config.onCatalogChange = function (headList) {
    // console.log(headList)
    window.oldCatalogs = headList
  }
  editor2.create()


  // $('#btn').click(function () {
    // console.log(window.oldCatalogs)

    // console.log(window.getSelection().anchorNode.parentNode)
    // console.log(window.getSelection().anchorNode.parentElement)
    // console.log(window.getSelection().baseNode.parentNode)
    // console.log(window.getSelection().baseNode.parentElement)
    // let cursorParentElem = window.getSelection().anchorNode.parentNode || window.getSelection().focusNode.parentNode
    // console.log(cursorParentElem.previousSibling)
    // console.log($('h1'))
    // $('h1').each((index, item) => {
    //   // console.log(item, index)
    //   item.innerHTML = `${index + 1} ${item.innerHTML}`
    //   console.log($(item).nextAll('h2'))
    // })
  // });
</script>

</html>
